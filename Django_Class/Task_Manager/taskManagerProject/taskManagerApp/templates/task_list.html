{% extends 'master.html' %}

{% block body %}
<style>
  body {
    background: #f0f2f5;
  }
  .tasks-wrapper {
    max-width: 1000px;
    margin: auto;
    margin-top: 50px;
  }
  .task-card {
    border: none;
    border-radius: 12px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    margin-bottom: 1rem;
    background: #fff;
    padding: 1rem;
    transition: transform 0.2s ease;
  }
  .task-card:hover {
    transform: translateY(-3px);
  }
  .badge {
    font-size: 0.85rem;
    padding: 0.4em 0.6em;
    border-radius: 0.4rem;
  }
  .task-actions a {
    margin-right: 0.4rem;
  }
</style>

<div class="tasks-wrapper">
  <h2 class="text-center mb-4 fw-bold text-primary">Your Tasks</h2>

  {% if tasks %}
    {% for task in tasks %}
    <div class="task-card">
      <div class="d-flex justify-content-between align-items-start flex-wrap">
        <div class="flex-grow-1 pe-3">
          <h5 class="mb-1">{{ task.TaskTitle }}</h5>
          <p class="mb-2 text-muted">{{ task.TaskDescription|truncatechars:100 }}</p>
          <div class="d-flex flex-wrap gap-2">
            {% if task.TaskPriority == 'high' %}
              <span class="badge bg-danger">High Priority</span>
            {% elif task.TaskPriority == 'medium' %}
              <span class="badge bg-warning text-dark">Medium Priority</span>
            {% else %}
              <span class="badge bg-success">Low Priority</span>
            {% endif %}
            
            {% if task.TaskStatus == 'pending' %}
              <span class="badge bg-secondary">Pending</span>
            {% elif task.TaskStatus == 'inProgress' %}
              <span class="badge bg-info text-dark">In Progress</span>
            {% else %}
              <span class="badge bg-success">Completed</span>
            {% endif %}
            
            <span class="badge bg-light text-dark border">
              Due: {{ task.TaskDueDate }}
            </span>
          </div>
        </div>
        <div class="task-actions mt-3 mt-md-0">
          <a href="#" class="btn btn-sm btn-outline-primary">
            <i class="bi bi-eye"></i> View
          </a>
          <a href="{% url 'updateTask' task.id %}" class="btn btn-sm btn-outline-secondary">
            <i class="bi bi-pencil"></i> Edit
          </a>
          <a href="#" class="btn btn-sm btn-outline-danger">
            <i class="bi bi-trash"></i> Delete
          </a>
        </div>
      </div>
    </div>
    {% endfor %}
  {% else %}
    <p class="text-center text-muted">No tasks found.</p>
  {% endif %}
</div>
{% endblock %}
